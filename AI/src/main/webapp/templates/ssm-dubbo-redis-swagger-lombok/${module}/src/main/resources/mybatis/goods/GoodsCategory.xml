<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<!-- 不使用namespace的话sql搜索定位会比较方便 -->
<mapper namespace="GoodsCategory">

    <resultMap id="rs_base" type="GoodsCategory">
        <result property="id" column="id"/>
        <result property="goodsCategoryCode" column="goodsCategoryCode"/>
        <result property="categoryName" column="categoryName"/>
        <result property="superCode" column="superCode"/>
        <result property="summary" column="summary"/>
        <result property="isShowFront" column="isShowFront"/>
        <result property="keyword" column="keyword"/>
        <result property="commissionRate" column="commissionRate"/>
    </resultMap>

    <!-- 用于select查询公用抽取的列 -->
    <sql id="GoodsCategory.columns">
		id,goodsCategoryCode,categoryName,superCode,summary,isShowFront,keyword,commissionRate
	</sql>

    <insert id="GoodsCategory.insert" useGeneratedKeys="true" keyProperty="id" parameterType="GoodsCategory">
        INSERT INTO goods_category (
        id ,
        goodsCategoryCode ,
        categoryName ,
        superCode ,
        summary ,
        isShowFront ,
        keyword ,
        commissionRate
        ) VALUES (
        #{id} ,
        #{goodsCategoryCode} ,
        #{categoryName} ,
        #{superCode} ,
        #{summary} ,
        #{isShowFront} ,
        #{keyword} ,
        #{commissionRate}
        )
        <selectKey keyProperty="id" resultType="long">
            select LAST_INSERT_ID()
        </selectKey>
    </insert>

    <!--更新-->
    <update id="GoodsCategory.update" parameterType="GoodsCategory">
        UPDATE goods_category
        <trim prefix="set" suffixOverrides=",">
            <if test="categoryName!=null and categoryName!=''">
                categoryName = #{categoryName} ,
            </if>
            <if test="superCode!=null and superCode!=''">
                superCode = #{superCode} ,
            </if>
            <if test="keyword!=null and keyword!=''">
                keyword = #{keyword} ,
            </if>
            <if test="isShowFront!=null and isShowFront!=''">
                isShowFront = #{isShowFront} ,
            </if>
            <if test="summary!=null and summary!=''">
                summary = #{summary} ,
            </if>
        </trim>

        WHERE
        goodsCategoryCode = #{goodsCategoryCode}
    </update>

    <delete id="GoodsCategory.delete">
        DELETE FROM goods_category WHERE
        id = #{id}  AND 
        goodsCategoryCode = #{id} 
    </delete>

    <select id="GoodsCategory.load" resultMap="rs_base">
        SELECT
        <include refid="GoodsCategory.columns"/>
        FROM goods_category
        WHERE
        goodsCategoryCode = #{goodsCategoryCode}
    </select>

    <sql id="GoodsCategory.where">
        <where>
            <if test="id!=null and id!=''">
                AND id = #{id}
            </if>
            <if test="goodsCategoryCode!=null and goodsCategoryCode!=''">
                AND goodsCategoryCode = #{goodsCategoryCode}
            </if>
            <if test="categoryName!=null and categoryName!=''">
                AND categoryName = #{categoryName}
            </if>
            <if test="superCode!=null and superCode!=''">
                AND superCode = #{superCode}
            </if>
            <if test="summary!=null and summary!=''">
                AND summary = #{summary}
            </if>
            <if test="isShowFront!=null and isShowFront!=''">
                AND isShowFront = #{isShowFront}
            </if>
            <if test="keyword!=null and keyword!=''">
                AND keyword = #{keyword}
            </if>
            <if test="commissionRate!=null and commissionRate!=''">
                AND commissionRate = #{commissionRate}
            </if>
        </where>
    </sql>


    <select id="GoodsCategory.count" resultType="int">
        SELECT count(1) FROM goods_category
        <include refid="GoodsCategory.where"/>
    </select>


    <select id="GoodsCategory.query" resultMap="rs_base">
        SELECT
        <include refid="GoodsCategory.columns"/>
        FROM goods_category
        <include refid="GoodsCategory.where"/>

        ORDER BY goodsCategoryCode DESC
    </select>


</mapper>

