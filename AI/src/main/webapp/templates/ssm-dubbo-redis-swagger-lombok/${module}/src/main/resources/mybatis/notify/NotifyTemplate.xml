<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<!-- 不使用namespace的话sql搜索定位会比较方便 -->
<mapper namespace="NotifyTemplate">

    <resultMap id="rs_base" type="NotifyTemplate">
        <result property="id" column="id"/>
        <result property="notifyCode" column="notifyCode"/>
        <result property="title" column="title"/>
        <result property="summary" column="summary"/>
        <result property="content" column="content"/>
        <result property="state" column="state"/>
        <result property="optCode" column="optCode"/>
        <result property="optName" column="optName"/>
    </resultMap>

    <!-- 用于select查询公用抽取的列 -->
    <sql id="NotifyTemplate.columns">
		id,notifyCode,title,summary,content,state,optCode,optName
	</sql>

    <insert id="NotifyTemplate.insert" useGeneratedKeys="true" keyProperty="id" parameterType="NotifyTemplate">
        INSERT INTO notify_template (
        id ,
        notifyCode ,
        title ,
        summary ,
        content ,
        state ,
        optCode ,
        optName
        ) VALUES (
        #{id} ,
        #{notifyCode} ,
        #{title} ,
        #{summary} ,
        #{content} ,
        #{state} ,
        #{optCode} ,
        #{optName}
        )
        <selectKey keyProperty="id" resultType="long">
            select LAST_INSERT_ID()
        </selectKey>
    </insert>

    <update id="NotifyTemplate.update" parameterType="NotifyTemplate">
        UPDATE notify_template
        <trim prefix="set" suffixOverrides=",">
            <if test="title!=null and title!=''">
                title = #{title} ,
            </if>
            <if test="content!=null and content!=''">
                content = #{content} ,
            </if>
            <if test="optCode!=null and optCode!=''">
                optCode = #{optCode} ,
            </if>
            <if test="optName!=null and optName!=''">
                optName = #{optName} ,
            </if>
            <if test="state!=null and state!=''">
                state = #{state} ,
            </if>
        </trim>

        WHERE
        notifyCode = #{notifyCode}
    </update>

    <delete id="NotifyTemplate.delete">
        DELETE FROM notify_template
        <include refid="NotifyTemplate.where"/>
    </delete>

    <select id="NotifyTemplate.load" resultMap="rs_base">
        SELECT
        <include refid="NotifyTemplate.columns"/>
        FROM notify_template
        <include refid="NotifyTemplate.where"/>
    </select>

    <sql id="NotifyTemplate.where">
        <where>
            <if test="id!=null and id!=''">
                AND id = #{id}
            </if>
            <if test="notifyCode!=null and notifyCode!=''">
                AND notifyCode = #{notifyCode}
            </if>
            <if test="title!=null and title!=''">
                AND title = #{title}
            </if>
            <if test="summary!=null and summary!=''">
                AND summary = #{summary}
            </if>
            <if test="content!=null and content!=''">
                AND content = #{content}
            </if>
            <if test="state!=null and state!=''">
                AND state = #{state}
            </if>
            <if test="optCode!=null and optCode!=''">
                AND optCode = #{optCode}
            </if>
            <if test="optName!=null and optName!=''">
                AND optName = #{optName}
            </if>
        </where>
    </sql>


    <select id="NotifyTemplate.count" resultType="int">
        SELECT count(1) FROM notify_template
        <include refid="NotifyTemplate.where"/>
    </select>


    <select id="NotifyTemplate.query" resultMap="rs_base">
        SELECT
        <include refid="NotifyTemplate.columns"/>
        FROM notify_template
        <include refid="NotifyTemplate.where"/>

        <if test="sortColumns!=null and sortColumns!=''">
            ORDER BY ${sortColumns}
        </if>
    </select>


</mapper>

